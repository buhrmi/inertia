import{router as Ae}from"inertiax-core";import{setupProgress as se}from"inertiax-core";import{createElement as ie}from"react";import{createHeadManager as re,router as V}from"inertiax-core";import{createElement as x,useEffect as oe,useMemo as ne,useState as ae}from"react";import{createContext as Z}from"react";var $=Z(void 0);$.displayName="InertiaHeadContext";var A=$;import{createContext as ee}from"react";var j=ee(void 0);j.displayName="InertiaPageContext";var E=j;import{createContext as te}from"react";var U=te(void 0);U.displayName="InertiaFrameContext";var w=U;function O({children:c,initialPage:s,initialComponent:i,resolveComponent:p,titleCallback:a,onHeadUpdate:S}){let[d,y]=ae({component:i||null,page:s,frames:null,key:null}),m=ne(()=>re(typeof window>"u",a||(f=>f),S||(()=>{})),[]);if(oe(()=>{V.init({initialPage:s,resolveComponent:p,swapComponent:async({component:f,page:e,preserveState:u})=>{let r=e.target;y(r?l=>({...l,frames:{...l.frames,[r]:{component:f,props:e.props}}}):l=>({component:f,page:e,frames:l.frames,key:u?l.key:Date.now()}))}}),V.on("navigate",()=>m.forceUpdate())},[]),!d.component)return x(A.Provider,{value:m},x(E.Provider,{value:d.page},null));let P=c||(({Component:f,props:e,key:u})=>{let r=x(f,{key:u,...e});return typeof f.layout=="function"?f.layout(r):Array.isArray(f.layout)?f.layout.concat(r).reverse().reduce((l,T)=>x(T,{children:l,...e})):r});return x(A.Provider,{value:m},x(E.Provider,{value:d.page},x(w.Provider,{value:d.frames},P({Component:d.component,key:d.key,props:d.page.props}))))}O.displayName="Inertia";async function K({id:c="app",resolve:s,setup:i,title:p,progress:a={},page:S,render:d}){let y=typeof window>"u",m=y?null:document.getElementById(c),P=S||JSON.parse(m.dataset.page),f=r=>Promise.resolve(s(r)).then(l=>l.default||l),e=[],u=await f(P.component).then(r=>i({el:m,App:O,props:{initialPage:P,initialComponent:r,resolveComponent:f,titleCallback:p,onHeadUpdate:y?l=>e=l:null}}));if(!y&&a&&se(a),y){let r=await d(ie("div",{id:c,"data-page":JSON.stringify(P)},u));return{head:e,body:r}}}import _,{useContext as pe,useEffect as ue,useMemo as le}from"react";var ce=function({children:c,title:s}){let i=pe(A),p=le(()=>i.createProvider(),[i]);ue(()=>()=>{p.disconnect()},[p]);function a(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function S(e){let u=Object.keys(e.props).reduce((r,l)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(l))return r;let T=e.props[l];return T===""?r+` ${l}`:r+` ${l}="${T}"`},"");return`<${e.type}${u}>`}function d(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((u,r)=>u+y(r),"")}function y(e){let u=S(e);return e.props.children&&(u+=d(e)),e.props.dangerouslySetInnerHTML&&(u+=e.props.dangerouslySetInnerHTML.__html),a(e)||(u+=`</${e.type}>`),u}function m(e){return _.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function P(e){return y(m(e))}function f(e){let u=_.Children.toArray(e).filter(r=>r).map(r=>P(r));return s&&!u.find(r=>r.startsWith("<title"))&&u.push(`<title inertia>${s}</title>`),u}return p.update(f(c)),null},me=ce;import{mergeDataIntoQueryString as de,router as fe,shouldIntercept as ge}from"inertiax-core";import{createElement as ye,forwardRef as Pe,useCallback as Te}from"react";var F=()=>{},W=Pe(({children:c,as:s="a",data:i={},href:p,method:a="get",preserveScroll:S=!1,preserveState:d=null,replace:y=!1,only:m=[],headers:P={},queryStringArrayFormat:f="brackets",onClick:e=F,onCancelToken:u=F,onBefore:r=F,onStart:l=F,onProgress:T=F,onFinish:H=F,onCancel:v=F,onSuccess:M=F,onError:b=F,...L},I)=>{let R=Te(o=>{e(o),ge(o)&&(o.preventDefault(),fe.visit(p,{data:i,method:a,preserveScroll:S,preserveState:d??a!=="get",replace:y,only:m,headers:P,onCancelToken:u,onBefore:r,onStart:l,onProgress:T,onFinish:H,onCancel:v,onSuccess:M,onError:b}))},[i,p,a,S,d,y,m,P,e,u,r,l,T,H,v,M,b]);s=s.toLowerCase(),a=a.toLowerCase();let[C,t]=de(a,p||"",i,f);return p=C,i=t,s==="a"&&a!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${p}" method="${a}" as="button">...</Link>`),ye(s,{...L,...s==="a"?{href:p}:{},ref:I,onClick:R},c)});W.displayName="InertiaLink";var Se=W;import{router as J}from"inertiax-core";import Ce from"lodash.isequal";import{useCallback as he,useEffect as ke,useRef as B,useState as h}from"react";import{router as q}from"inertiax-core";import{useEffect as Fe,useState as ve}from"react";function D(c,s){let[i,p]=ve(()=>{let a=q.restore(s);return a!==void 0?a:c});return Fe(()=>{q.remember(i,s)},[i,s]),[i,p]}function Q(c,s){let i=B(null),p=typeof c=="string"?c:null,[a,S]=h((typeof c=="string"?s:c)||{}),d=B(null),y=B(null),[m,P]=p?D(a,`${p}:data`):h(a),[f,e]=p?D({},`${p}:errors`):h({}),[u,r]=h(!1),[l,T]=h(!1),[H,v]=h(null),[M,b]=h(!1),[L,I]=h(!1),R=t=>t;ke(()=>(i.current=!0,()=>{i.current=!1}),[]);let C=he((t,o,n={})=>{let k={...n,onCancelToken:g=>{if(d.current=g,n.onCancelToken)return n.onCancelToken(g)},onBefore:g=>{if(b(!1),I(!1),clearTimeout(y.current),n.onBefore)return n.onBefore(g)},onStart:g=>{if(T(!0),n.onStart)return n.onStart(g)},onProgress:g=>{if(v(g),n.onProgress)return n.onProgress(g)},onSuccess:g=>{if(i.current&&(T(!1),v(null),e({}),r(!1),b(!0),I(!0),y.current=setTimeout(()=>{i.current&&I(!1)},2e3)),n.onSuccess)return n.onSuccess(g)},onError:g=>{if(i.current&&(T(!1),v(null),e(g),r(!0)),n.onError)return n.onError(g)},onCancel:()=>{if(i.current&&(T(!1),v(null)),n.onCancel)return n.onCancel()},onFinish:()=>{if(i.current&&(T(!1),v(null)),d.current=null,n.onFinish)return n.onFinish()}};t==="delete"?J.delete(o,{...k,data:R(m)}):J[t](o,R(m),k)},[m,e]);return{data:m,setData(t,o){P(typeof t=="string"?{...m,[t]:o}:typeof t=="function"?n=>t(n):t)},isDirty:!Ce(m,a),errors:f,hasErrors:u,processing:l,progress:H,wasSuccessful:M,recentlySuccessful:L,transform(t){R=t},setDefaults(t,o){S(typeof t>"u"?()=>m:n=>({...n,...typeof t=="string"?{[t]:o}:t}))},reset(...t){t.length===0?P(a):P(Object.keys(a).filter(o=>t.includes(o)).reduce((o,n)=>(o[n]=a[n],o),{...m}))},setError(t,o){e(n=>{let k={...n,...typeof t=="string"?{[t]:o}:t};return r(Object.keys(k).length>0),k})},clearErrors(...t){e(o=>{let n=Object.keys(o).reduce((k,g)=>({...k,...t.length>0&&!t.includes(g)?{[g]:o[g]}:{}}),{});return r(Object.keys(n).length>0),n})},submit:C,get(t,o){C("get",t,o)},post(t,o){C("post",t,o)},put(t,o){C("put",t,o)},patch(t,o){C("patch",t,o)},delete(t,o){C("delete",t,o)},cancel(){d.current&&d.current.cancel()}}}import{useContext as xe}from"react";function z(){let c=xe(E);if(!c)throw new Error("usePage must be used within the Inertia component");return c}import{useEffect as Ie,createElement as G}from"react";import{useContext as be}from"react";function N(){return be(w)}var X=({src:c,id:s=Math.random(),children:i})=>{let p=N(),a=p?.[s]&&p[s].component;return Ie(()=>{Y.visit(c,{target:s.toString()})},[]),G("div",{"data-inertia-frame-id":s},a?G(a,p[s].props):i)};X.displayName="InertiaFrame";var Re=X;var Y=Ae;export{Re as Frame,me as Head,Se as Link,K as createInertiaApp,Y as router,Q as useForm,z as usePage,D as useRemember};
//# sourceMappingURL=index.esm.js.map
