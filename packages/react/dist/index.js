var ye=Object.create;var $=Object.defineProperty;var Pe=Object.getOwnPropertyDescriptor;var Te=Object.getOwnPropertyNames;var Se=Object.getPrototypeOf,Fe=Object.prototype.hasOwnProperty;var ve=(o,r)=>{for(var n in r)$(o,n,{get:r[n],enumerable:!0})},X=(o,r,n,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Te(r))!Fe.call(o,a)&&a!==n&&$(o,a,{get:()=>r[a],enumerable:!(u=Pe(r,a))||u.enumerable});return o};var Y=(o,r,n)=>(n=o!=null?ye(Se(o)):{},X(r||!o||!o.__esModule?$(n,"default",{value:o,enumerable:!0}):n,o)),Ce=o=>X($({},"__esModule",{value:!0}),o);var ke={};ve(ke,{Frame:()=>fe,Head:()=>ie,Link:()=>ue,createInertiaApp:()=>_,router:()=>G,useForm:()=>J,usePage:()=>Q,useRemember:()=>A});module.exports=Ce(ke);var ge=require("inertiax-core");var ae=require("inertiax-core"),se=require("react");var O=require("inertiax-core"),S=require("react");var Z=require("react"),ee=(0,Z.createContext)(void 0);ee.displayName="InertiaHeadContext";var M=ee;var te=require("react"),re=(0,te.createContext)(void 0);re.displayName="InertiaPageContext";var w=re;var oe=require("react"),ne=(0,oe.createContext)(void 0);ne.displayName="InertiaFrameContext";var j=ne;function U({children:o,initialPage:r,initialComponent:n,resolveComponent:u,titleCallback:a,onHeadUpdate:v}){let[d,P]=(0,S.useState)({component:n||null,page:r,frames:null,key:null}),m=(0,S.useMemo)(()=>(0,O.createHeadManager)(typeof window>"u",a||(f=>f),v||(()=>{})),[]);if((0,S.useEffect)(()=>{O.router.init({initialPage:r,resolveComponent:u,swapComponent:async({component:f,page:e,preserveState:l})=>{let s=e.target;P(s?c=>({...c,frames:{...c.frames,[s]:{component:f,props:e.props}}}):c=>({component:f,page:e,frames:c.frames,key:l?c.key:Date.now()}))}}),O.router.on("navigate",()=>m.forceUpdate())},[]),!d.component)return(0,S.createElement)(M.Provider,{value:m},(0,S.createElement)(w.Provider,{value:d.page},null));let T=o||(({Component:f,props:e,key:l})=>{let s=(0,S.createElement)(f,{key:l,...e});return typeof f.layout=="function"?f.layout(s):Array.isArray(f.layout)?f.layout.concat(s).reverse().reduce((c,F)=>(0,S.createElement)(F,{children:c,...e})):s});return(0,S.createElement)(M.Provider,{value:m},(0,S.createElement)(w.Provider,{value:d.page},(0,S.createElement)(j.Provider,{value:d.frames},T({Component:d.component,key:d.key,props:d.page.props}))))}U.displayName="Inertia";async function _({id:o="app",resolve:r,setup:n,title:u,progress:a={},page:v,render:d}){let P=typeof window>"u",m=P?null:document.getElementById(o),T=v||JSON.parse(m.dataset.page),f=s=>Promise.resolve(r(s)).then(c=>c.default||c),e=[],l=await f(T.component).then(s=>n({el:m,App:U,props:{initialPage:T,initialComponent:s,resolveComponent:f,titleCallback:u,onHeadUpdate:P?c=>e=c:null}}));if(!P&&a&&(0,ae.setupProgress)(a),P){let s=await d((0,se.createElement)("div",{id:o,"data-page":JSON.stringify(T)},l));return{head:e,body:s}}}var C=Y(require("react"),1);var he=function({children:o,title:r}){let n=(0,C.useContext)(M),u=(0,C.useMemo)(()=>n.createProvider(),[n]);(0,C.useEffect)(()=>()=>{u.disconnect()},[u]);function a(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function v(e){let l=Object.keys(e.props).reduce((s,c)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(c))return s;let F=e.props[c];return F===""?s+` ${c}`:s+` ${c}="${F}"`},"");return`<${e.type}${l}>`}function d(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((l,s)=>l+P(s),"")}function P(e){let l=v(e);return e.props.children&&(l+=d(e)),e.props.dangerouslySetInnerHTML&&(l+=e.props.dangerouslySetInnerHTML.__html),a(e)||(l+=`</${e.type}>`),l}function m(e){return C.default.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function T(e){return P(m(e))}function f(e){let l=C.default.Children.toArray(e).filter(s=>s).map(s=>T(s));return r&&!l.find(s=>s.startsWith("<title"))&&l.push(`<title inertia>${r}</title>`),l}return u.update(f(o)),null},ie=he;var I=require("inertiax-core"),R=require("react"),h=()=>{},pe=(0,R.forwardRef)(({children:o,as:r="a",data:n={},href:u,method:a="get",preserveScroll:v=!1,preserveState:d=null,replace:P=!1,only:m=[],headers:T={},queryStringArrayFormat:f="brackets",onClick:e=h,onCancelToken:l=h,onBefore:s=h,onStart:c=h,onProgress:F=h,onFinish:B=h,onCancel:k=h,onSuccess:N=h,onError:E=h,...K},D)=>{let H=(0,R.useCallback)(i=>{e(i),(0,I.shouldIntercept)(i)&&(i.preventDefault(),I.router.visit(u,{data:n,method:a,preserveScroll:v,preserveState:d??a!=="get",replace:P,only:m,headers:T,onCancelToken:l,onBefore:s,onStart:c,onProgress:F,onFinish:B,onCancel:k,onSuccess:N,onError:E}))},[n,u,a,v,d,P,m,T,e,l,s,c,F,B,k,N,E]);r=r.toLowerCase(),a=a.toLowerCase();let[x,t]=(0,I.mergeDataIntoQueryString)(a,u||"",n,f);return u=x,n=t,r==="a"&&a!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${u}" method="${a}" as="button">...</Link>`),(0,R.createElement)(r,{...K,...r==="a"?{href:u}:{},ref:D,onClick:H},o)});pe.displayName="InertiaLink";var ue=pe;var q=require("inertiax-core"),le=Y(require("lodash.isequal"),1),y=require("react");var W=require("inertiax-core"),V=require("react");function A(o,r){let[n,u]=(0,V.useState)(()=>{let a=W.router.restore(r);return a!==void 0?a:o});return(0,V.useEffect)(()=>{W.router.remember(n,r)},[n,r]),[n,u]}function J(o,r){let n=(0,y.useRef)(null),u=typeof o=="string"?o:null,[a,v]=(0,y.useState)((typeof o=="string"?r:o)||{}),d=(0,y.useRef)(null),P=(0,y.useRef)(null),[m,T]=u?A(a,`${u}:data`):(0,y.useState)(a),[f,e]=u?A({},`${u}:errors`):(0,y.useState)({}),[l,s]=(0,y.useState)(!1),[c,F]=(0,y.useState)(!1),[B,k]=(0,y.useState)(null),[N,E]=(0,y.useState)(!1),[K,D]=(0,y.useState)(!1),H=t=>t;(0,y.useEffect)(()=>(n.current=!0,()=>{n.current=!1}),[]);let x=(0,y.useCallback)((t,i,p={})=>{let b={...p,onCancelToken:g=>{if(d.current=g,p.onCancelToken)return p.onCancelToken(g)},onBefore:g=>{if(E(!1),D(!1),clearTimeout(P.current),p.onBefore)return p.onBefore(g)},onStart:g=>{if(F(!0),p.onStart)return p.onStart(g)},onProgress:g=>{if(k(g),p.onProgress)return p.onProgress(g)},onSuccess:g=>{if(n.current&&(F(!1),k(null),e({}),s(!1),E(!0),D(!0),P.current=setTimeout(()=>{n.current&&D(!1)},2e3)),p.onSuccess)return p.onSuccess(g)},onError:g=>{if(n.current&&(F(!1),k(null),e(g),s(!0)),p.onError)return p.onError(g)},onCancel:()=>{if(n.current&&(F(!1),k(null)),p.onCancel)return p.onCancel()},onFinish:()=>{if(n.current&&(F(!1),k(null)),d.current=null,p.onFinish)return p.onFinish()}};t==="delete"?q.router.delete(i,{...b,data:H(m)}):q.router[t](i,H(m),b)},[m,e]);return{data:m,setData(t,i){T(typeof t=="string"?{...m,[t]:i}:typeof t=="function"?p=>t(p):t)},isDirty:!(0,le.default)(m,a),errors:f,hasErrors:l,processing:c,progress:B,wasSuccessful:N,recentlySuccessful:K,transform(t){H=t},setDefaults(t,i){v(typeof t>"u"?()=>m:p=>({...p,...typeof t=="string"?{[t]:i}:t}))},reset(...t){t.length===0?T(a):T(Object.keys(a).filter(i=>t.includes(i)).reduce((i,p)=>(i[p]=a[p],i),{...m}))},setError(t,i){e(p=>{let b={...p,...typeof t=="string"?{[t]:i}:t};return s(Object.keys(b).length>0),b})},clearErrors(...t){e(i=>{let p=Object.keys(i).reduce((b,g)=>({...b,...t.length>0&&!t.includes(g)?{[g]:i[g]}:{}}),{});return s(Object.keys(p).length>0),p})},submit:x,get(t,i){x("get",t,i)},post(t,i){x("post",t,i)},put(t,i){x("put",t,i)},patch(t,i){x("patch",t,i)},delete(t,i){x("delete",t,i)},cancel(){d.current&&d.current.cancel()}}}var ce=require("react");function Q(){let o=(0,ce.useContext)(w);if(!o)throw new Error("usePage must be used within the Inertia component");return o}var L=require("react");var me=require("react");function z(){return(0,me.useContext)(j)}var de=({src:o,id:r=Math.random(),children:n})=>{let u=z(),a=u?.[r]&&u[r].component;return(0,L.useEffect)(()=>{G.visit(o,{target:r.toString()})},[]),(0,L.createElement)("div",{"data-inertia-frame-id":r},a?(0,L.createElement)(a,u[r].props):n)};de.displayName="InertiaFrame";var fe=de;var G=ge.router;
//# sourceMappingURL=index.js.map
